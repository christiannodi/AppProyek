<%- include('partials/header', {title: 'Lihat Request'}) %>

<div class="px-3 py-3">
    <div class="d-flex align-items-center mb-4">
        <a href="/dashboard" class="btn btn-light me-3"><i class="bi bi-arrow-left"></i></a>
        <h4 class="mb-0">Daftar Request Material Saya</h4>
    </div>

    <% if (requests.length === 0) { %>
        <div class="alert alert-info">Anda belum pernah membuat request material.</div>
    <% } else { %>
        <div class="list-group">
            <% requests.forEach(req => { %>
                <a href="/view-requests/<%= encodeURIComponent(req.id) %>" class="list-group-item list-group-item-action">
                    <div class="d-flex w-100 justify-content-between">
                        <h5 class="mb-1"><%= req.id %></h5>
                        <small>
                            <% if (req.status === 'request') { %>
                                <span class="badge bg-primary">Request</span>
                            <% } else if (req.status === 'checking') { %>
                                <span class="badge bg-warning text-dark">Checking</span>
                            <% } else if (req.status === 'PO') { %>
                                <span class="badge bg-info text-dark">PO</span>
                            <% } else if (req.status === 'done') { %>
                                <span class="badge bg-success">Done</span>
                            <% } else { %>
                                <span class="badge bg-secondary"><%= req.status %></span>
                            <% } %>
                        </small>
                    </div>
                    <p class="mb-1"><%= req.project %></p>
                    <% if (user.role === 'superadmin') { %>
                        <p class="mb-1 text-muted small"><i class="bi bi-person-fill"></i> Dibuat oleh: <%= req.user %></p>
                    <% } %>
                    <small><%= new Date(req.tanggal).toLocaleDateString('id-ID', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' }) %></small>
                </a>
            <% }) %>
        </div>
    <% } %>

</div>

<%- include('partials/bottom_nav') %>
<%- include('partials/footer') %>